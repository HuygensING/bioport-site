<html metal:use-macro="context/@@main_template/macros/master">
    <title metal:fill-slot="head_title"
        tal:content="structure python:view.biography.title()" ></title> 
    <div metal:fill-slot="content"
    	tal:define="illustraties  python:view.biography.get_illustrations()"
    	>
    <div class="illustratie" tal:repeat="ill python:illustraties[:1]">
    <img
        tal:attributes="src ill/cached_url" 
        alt="illustratie bij deze biografie" />
    </div>
    <div class="illustratie" tal:condition="not:illustraties">
        <img tal:attributes="src static/geen_plaatje.png" />
    </div>
    <div id="bioinfo" >
    <h1 tal:content="structure python:view.biography.naam() and view.biography.naam().volledige_naam()" />
    
    <table class="leefjaren">
       <tal:block define="
	       event python:view.get_event('birth');
   			title string:Geboren;">
       	<tr metal:define-macro="event"
       		tal:condition="python:event and (event.when or event.place or event.date_text)">
            <th tal:content="title">Geboren</th>
            <td>
             <span tal:replace="event/place" />
             </td>
             <td class="datum">
                <span tal:replace="python:event.when_formatted or event.date_text" />
             </td>
         </tr>
		</tal:block>
      <tal:block define="
	       event python:view.get_event('baptism');
   			title string:Gedoopt;">
   			<tr metal:use-macro="template/macros/event" />
   		</tal:block>
       <tal:block define="
	       event python:view.get_event('funeral');
   			title string:Begraven;">
   			<tr metal:use-macro="template/macros/event" />
   		</tal:block>
       <tal:block define="
	       event python:view.get_event('death');
   			title string:Gestorven;">
   			<tr metal:use-macro="template/macros/event" />
   		</tal:block>
     </table>
        <div tal:condition="python:len(view.biography.get_names()) > 1">
            <h2>Naamsvarianten</h2>
            <hr>
            <ul><li tal:repeat="naam python:view.biography.get_names()"
                tal:content="structure python:naam.volledige_naam()"/>
            </ul>
        </div>
         <div 
            tal:define="sexes python:['onbekend', 'man', 'vrouw'];
                sex python:view.biography.get_value('geslacht')"
            tal:condition="sex">
            <h2>Geslacht</h2>
            <hr>
            <ul><li><span tal:replace="python:sexes[int(sex)]" /></ul>
        </div>
        <div tal:condition="python:view.biography.get_value('beroep')">
            <h2>Beroepen en functies</h2>
    <hr>
            <ul><li tal:repeat="beroep python:view.biography.get_value('beroep')" 
                tal:content="structure beroep" /></ul>
        </div>
    </div>
    <div class="levensbeschrijvingen">
    <h2>Levensbeschrijvingen</h2>
    <hr />
    <ul class="levensbeschrijvingen">
    <li tal:repeat="biography view/person/get_biographies" >
        <a tal:attributes="href python:biography.get_value('url_biografie')"
            tal:content="python:biography.naam() and biography.naam().volledige_naam()"></a>
        <span tal:condition="python:biography.get_value('auteur')">
        	door
            <span tal:repeat="auteur python:biography.get_value('auteur')" 
                tal:content="structure auteur" />,
        </span>
        <span>
			in  <a tal:attributes="href python:biography.get_value('url_publisher')"
                    tal:replace="python:biography.get_value('naam_publisher')"></a>
    	</span>
    	<div class="bio_tekst_fragment"
    		tal:define="text python:biography.get_value('tekst')"
            tal:condition="text">
             <span tal:replace="structure python:text[:250] + text[250:].split(' ')[0] + ' ...'" />
           </div>
        </li>
    </ul>
    </div>
    <p>
<div class="illustratie" tal:repeat="url python:illustraties[1:]">
    <img
        tal:attributes="src url" 
        alt="illustratie bij deze biografie" />
    </div>
    
    
    <hr />
    <br><br>
    <ul>
    <li>
    <a href="../list" Onclick="history.go(-1);return false;">terug</a>
    <li>
    <a tal:attributes="href python:view.url(context['admin'], 'persoon', data={'bioport_id':view.bioport_id})" >bewerk de gegevens van deze persoon</a>
    </ul>
    
    
    
    
    <tt tal:condition="context/debug">
    <pre>Debug information</pre>
    <pre>
    redirects_to: <tt tal:content="python:view.person.redirects_to()" />
    </pre>
<div tal:repeat="bio view/person/get_biographies">
<div
	tal:define="d python:bio.to_dict()" 
	tal:repeat="k d">
<tt	 tal:content="python:'%s : %s' % (k, d[k])" /> 
<br>
</div>
</div>
<br>
<br>
<pre tal:repeat="bio view/person/get_biographies"  tal:content="bio/to_string"  /> 
    </tt> 

</div>
</html>